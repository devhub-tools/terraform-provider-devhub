---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "devhub_terradesk_workspace Resource - devhub"
subcategory: ""
description: |-
  TerraDesk workspace resource
---

# devhub_terradesk_workspace (Resource)

TerraDesk workspace resource

## Example Usage

```terraform
resource "devhub_terradesk_workspace" "example" {
  name         = "default"
  repository   = "devhub-tools/devhub"
  path         = "terraform"
  docker_image = "hashicorp/terraform:1.10"

  env_vars = [
    {
      name  = "ENV_VAR"
      value = "env-var-value"
    }
  ]

  secrets = [
    {
      name  = "my_secret"
      value = "secret-value"
    }
  ]

  workload_identity = {
    enabled               = true
    service_account_email = "devhub@my-project.iam.gserviceaccount.com"
    provider              = google_iam_workload_identity_pool_provider.devhub.name
  }
}

resource "google_iam_workload_identity_pool" "devhub" {
  project                   = google_project.default.project_id
  workload_identity_pool_id = "devhub"
  display_name              = "devhub"
}

resource "google_iam_workload_identity_pool_provider" "devhub" {
  project                            = google_project.default.project_id
  workload_identity_pool_id          = google_iam_workload_identity_pool.devhub.workload_identity_pool_id
  workload_identity_pool_provider_id = "devhub"

  attribute_mapping = {
    "google.subject"                   = "assertion.sub"
    "attribute.terradesk_workspace_id" = "assertion.terradesk_workspace_id"
  }

  oidc {
    issuer_uri = "https://devhub.example.com"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `docker_image` (String) The docker image to use for running commands, for example: hashicorp/terraform:1.10.
- `name` (String) The name for users to use to identity the workspace.
- `repository` (String) Which GitHub repository should be used in the format `owner/name`. Must have the GitHub integration enabled.

### Optional

- `agent_id` (String) The agent id for the database.
- `cpu_requests` (String) How much cpu should be requested for the pod scheduled by the job, see kubernetes docs for allowable values.
- `env_vars` (Attributes List) (see [below for nested schema](#nestedatt--env_vars))
- `init_args` (String) Args to pass to the init command.
- `memory_requests` (String) How much memory should be requested for the pod scheduled by the job, see kubernetes docs for allowable values.
- `path` (String) The file path of here the workspace is located in the provided GitHub repository. Defaults to the root of the repository.
- `required_approvals` (Number) Specify how many reviews are required to apply plans.
- `run_plans_automatically` (Boolean) Whether to run plans automatically for PRs and pushes. Make sure to consider who can push to your GitHub repository if you have this setting on as it could grant sensitive access.
- `secrets` (Attributes List) (see [below for nested schema](#nestedatt--secrets))
- `workload_identity` (Attributes) (see [below for nested schema](#nestedatt--workload_identity))

### Read-Only

- `id` (String) Workspace id.

<a id="nestedatt--env_vars"></a>
### Nested Schema for `env_vars`

Required:

- `name` (String) Name to use for the env var.
- `value` (String) Env var value.

Read-Only:

- `id` (String) Env var id.


<a id="nestedatt--secrets"></a>
### Nested Schema for `secrets`

Required:

- `name` (String) Secret name.
- `value` (String, Sensitive) Secret value.

Read-Only:

- `id` (String) Secret id.


<a id="nestedatt--workload_identity"></a>
### Nested Schema for `workload_identity`

Optional:

- `enabled` (Boolean) Whether to enable Google workload identity to authenticate with Google services.
- `provider` (String) The workload identity provider to use: `projects/${PROJECT_NUMBER}/locations/global/workloadIdentityPools/${POOL}/providers/${PROVIDER}`
- `service_account_email` (String) The service account email to use for workload identity.
